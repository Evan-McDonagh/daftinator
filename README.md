# daftinator

**daftinator** is a simple chrome extension for injecting personal details and a pre-written message into the contact section of an Irish online rental property listing. 

The script will parse the name of the lister and the address of the property from the site and can inject it into your prewritten spiel wherever you want, with basic built in logic to fill a default salutation or a gendered name-specific salutation. 

It works pretty well for [daft.ie](https://www.daft.ie/) at the moment, and does most of its jobs on [rent.ie](https://www.rent.ie/) with some more kinks to work out.

## Usage

The use of the extension is simple following installation. Following navigating to the relevant listing there are four things to worry about:

1. Default salutation indicated what salutation to use in the event of a nameless lister such as a letting agency. 
2. The gender radio button determines whether the extension inserts Dear Mr." or "Dear Ms." with the letting agent name or if it uses the default salutation with the selection of "None".
3. The "Insert Details" button will open the email popup and insert all relevant data.
4. Unfortunately due to a yet to be worked out bug you will need to click or tab through each field to allow for submission. Should hopefully fix that soon.
5. You'll have to manually click the reCAPTCHA and submit, beacause if I could solve that I'd probably have better things to do than automate away typing under 50 words. 

## Installation

There are two steps to setting up the extension:

1. Write your own *myDetails.js* file in the main directory of the unpacked extension.
2. Navigate to chrome://extensions/, enable developer mode, and add the extension to the chrome via the "Load Unpacked Extension" button, selecting the directory containing the downloaded extension.

MyDetails.js contains your personal details (name, address, phone number) and a the email you wish to be send, setup to include particular parsed data from the property listing. Here is a template of a myDetails.js file:


```javascript
data = {
    var data = {
    name:"[Your Name]",
    email:"[Your email address]",
    phone:"[Your phone number]",
    message_code:'data.message = `[Your message]`'
}
```
Most of the fields are straightforward, however the message_code is slightly more complicated. The only changed you make should be inside the backticks. This allows you to use template literals to indicate where the program will insert a saluation (${salutation}) and the address (${address}) generated by the extensino from the elements of the listing. 

Here is an example completed myDetails.js file:
```javascript
data = {
    name:"Sherlock Holmes",
    email:"sherlock@holmsconsultancy.com",
    phone:"+353 20 919 2682",
    message_code:'data.message = `${salutation}, \n\nI am writing to you to enquire about the availability of the apartment at ${address}. I would be interested in arranging a viewing at your earliest convenience. My references are available on request.\n\nRegards,\nSherlock Holmes.`'
}
```

So, on running the extension on the listing "221B Baker Street" posted by "Martha Louise Hudson" and the Agent Gender button selected as female, the message component will then render as in the daft email popup as:

> Dear Ms. Hudson, 
>
> I am writing to you to enquire about the availability of the apartment at 221B Baker Street. I would be interested in arranging a viewing at your earliest convenience. My references are available on request.
>
>Regards,
>Sherlock Holmes.

Important to note:

- Make sure your message is wrapped in the backticks as indicated or the script will not parse the template literals. 
- Escape any single quotes that you use.

This writing-your-own-details-script shenanigan should be temperorary until I add options for updating the details in storage through the popup. Until then changing your details will require reloading the extension.